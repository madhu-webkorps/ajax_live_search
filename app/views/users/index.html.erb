<div class="container">
<p id="notice"><%= notice %></p>
 <h1>Users</h1>
 <%= link_to 'New User', new_user_path  , class:"btn btn-outline-primary"%>
 <br><br>

  <div class="row">
    <div class="col-md-6">
      <table class="table">
        <thead>
          <tr>
            <th>Name</th>
            <th>Phone</th>
            <th>Email</th>
             <th>City</th>
            <th>Country</th>
            <th>Phone</th>
            <th colspan="3"></th>
          </tr>
       </thead>
      <tbody>

        <% @users.each do |user| %>
        <tr>
          <td><%= user.name %></td>
          <td><%= user.email %></td>
          <td><%= user.phone %></td>
          <% @address = Address.find_by_user_id(user.id)%>

                <td><%= @address.city %></td> 
                <td><%= @address.state %> </td>
            
          <td><%= link_to 'Show', user %></td>
          <td><%= link_to 'Edit', edit_user_path(user) %></td>
          <td><%= link_to 'Destroy', user, method: :delete, data: { confirm: 'Are you sure?' } %></td>
        </tr>
        <% end %>
      </tbody>
</table>

<br>

<%# <%= link_to 'search user by address', address_count_path , class:"btn btn-outline-primary" %> 

<h5>Search user  by address </h5><hr><br>

<%= form_with url: "/search_user", method: :get do |form| %>
        <div class="field">
            <%= form.label :Address %>
            <%= form.text_field :address %>
        </div>
        <div class="actions">
            <%= form.submit "search" ,class:"btn btn-outline-primary " %>
        </div>
    <% end %>

